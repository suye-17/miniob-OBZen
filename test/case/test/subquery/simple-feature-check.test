-- echo ===== 简化功能验证测试 =====

-- echo === 创建测试表 ===
CREATE TABLE test1(id int, val int);
CREATE TABLE test2(id int, score int);

INSERT INTO test1 VALUES (1, 10);
INSERT INTO test1 VALUES (2, 20);
INSERT INTO test1 VALUES (3, 30);
INSERT INTO test2 VALUES (1, 85);
INSERT INTO test2 VALUES (2, 90);

-- echo === 测试1: IN值列表 ===
-- sort select * from test1 where id in (1, 3);

-- echo === 测试2: NOT IN值列表 ===
-- sort select * from test1 where id not in (2);

-- echo === 测试3: IN子查询 ===
-- sort select * from test1 where id in (select id from test2);

-- echo === 测试4: NOT IN子查询 ===
-- sort select * from test1 where id not in (select id from test2 where score < 90);

-- echo === 测试5: INNER JOIN ===
-- sort select * from test1 inner join test2 on test1.id = test2.id;

-- echo === 测试6: INNER JOIN多条件 ===
-- sort select * from test1 inner join test2 on test1.id = test2.id and test2.score > 85;

-- echo === 测试7: EXISTS ===
-- sort select * from test1 where exists (select * from test2 where test2.id = test1.id);

-- echo === 测试8: NOT EXISTS ===
-- sort select * from test1 where not exists (select * from test2 where test2.id = test1.id and test2.score > 90);

-- echo === 测试9: 标量子查询 ===
-- sort select * from test1 where val > (select avg(val) from test1);

-- echo === 测试10: 聚合函数 ===
select count(*), sum(score), avg(score) from test2;

-- echo === 清理 ===
DROP TABLE test1;
DROP TABLE test2;

